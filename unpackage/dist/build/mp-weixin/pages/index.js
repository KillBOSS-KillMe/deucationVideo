(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index"],{5368:function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o}))},6161:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("3776"));function a(t){return t&&t.__esModule?t:{default:t}}var s=getApp(),u=function(){n.e("componets/wyc-rate/uni-rate").then(function(){return resolve(n("fe20"))}.bind(null,n)).catch(n.oe)},i={components:{uniRate:u},data:function(){return{recList:{},navList:[{title:"发现精彩",img:"/static/index1.png"},{title:"推荐图书",img:"/static/index2.png"},{title:"畅销资料",img:"/static/index3.png"}],bannerList:[],imgUrl:"",userInfoButtonShow:!0,userInfo:{},sellList:[],bookList:[],authorizationButton:null,dataCount:0,bookCount:0,curriculaCount:0}},onLoad:function(){this.userInfo=s.globalData.userInfo,this.imgUrl=o.default.imgUrl,this.onGetUserInfo(),t.showShareMenu({withShareTicket:!0})},onShow:function(){this.banner(),this.course(),this.sellData(),this.books()},methods:{banner:function(e){var n=this;t.request({url:"".concat(o.default.requestUrl,"index/getBanners"),method:"GET",success:function(e){t.hideLoading(),e=o.default.null2str(e),console.log(e),"ok"==e.data.status_code?n.bannerList=e.data.data:t.showToast({title:e.data.message,icon:"none"})}})},getNav:function(e){"发现精彩"==e?t.navigateTo({url:"/pages/find"}):t.navigateTo({url:"/pages/indexAll?type=导航&mode=".concat(e)})},course:function(){var e=this;t.showLoading({title:"加载中..."}),t.request({url:"".concat(o.default.requestUrl,"index/curriculum"),method:"GET",data:{type:"index"},success:function(n){t.hideLoading(),n=o.default.null2str(n),console.log(n),"ok"==n.data.status_code?(e.recList=n.data.data,e.curriculaCount=n.data.count):e.recList=[]}})},goRecList:function(e){t.navigateTo({url:"/pages/indexCourse?id=".concat(e)})},sellData:function(){var e=this;t.showLoading({title:"加载中..."}),t.request({url:"".concat(o.default.requestUrl,"index/data"),method:"GET",data:{type:"index"},success:function(n){t.hideLoading(),n=o.default.null2str(n),console.log(n),"ok"==n.data.status_code?(e.sellList=n.data.data,e.dataCount=n.data.count):e.sellList=[]}})},books:function(){var e=this;t.showLoading({title:"加载中..."}),t.request({url:"".concat(o.default.requestUrl,"index/book"),method:"GET",data:{type:"index"},success:function(n){t.hideLoading(),n=o.default.null2str(n),console.log(n),"ok"==n.data.status_code?(e.bookList=n.data.data,e.bookCount=n.data.count):e.bookList=[]}})},getMore:function(e){"recommend"==e?t.switchTab({url:"/pages/classify"}):t.navigateTo({url:"/pages/indexAll?type=更多&mode=".concat(e)})},goData:function(e,n){t.navigateTo({url:"/pages/indexDataDetail?type=".concat(e,"&id=").concat(n)})},verificationUserInfo:function(){if(!this.userInfo.hasOwnProperty("id"))return t.showToast({title:"用户信息加载中...",icon:"none"}),!0},onGetUserInfo:function(){var e=this;t.getSetting({success:function(n){n.authSetting["scope.userInfo"]?(e.userInfoButtonShow=!1,t.getUserInfo({success:function(t){console.log(t),e.userInfo=Object.assign(e.userInfo,t.userInfo),s.globalData.userInfo=e.userInfo,e.setUserInfo()}})):e.setUserInfo()}})},setUserInfo:function(){var e=this;t.login({success:function(n){t.request({url:"".concat(o.default.requestUrl,"auth/login"),method:"POST",data:{code:n.code,nickname:e.userInfo.nickName,sex:e.userInfo.gender,headimgurl:e.userInfo.avatarUrl,mobile:""},success:function(a){if(n=o.default.null2str(n),t.hideToast(),console.log(a),200===a.statusCode){var u=a.data.token_type+" "+a.data.access_token;s.globalData.token=u,e.getIndexInfo()}else t.showModal({title:"",content:a.data.errmsg})}})}})},getIndexInfo:function(){var e=this;t.request({url:"".concat(o.default.requestUrl,"auth/me"),method:"POST",header:{authorization:s.globalData.token},success:function(n){t.hideLoading(),n=o.default.null2str(n),"ok"==n.data.status_code&&(e.userInfo=n.data.data,s.globalData.userInfo=n.data.data)}})},goSearch:function(){t.navigateTo({url:"search"})}}};e.default=i}).call(this,n("543d")["default"])},"88e4":function(t,e,n){"use strict";n.r(e);var o=n("5368"),a=n("b2f7");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("cf6c");var u,i=n("f0c5"),c=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);e["default"]=c.exports},9317:function(t,e,n){"use strict";(function(t){n("95ab"),n("921b");o(n("66fd"));var e=o(n("88e4"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b2f7:function(t,e,n){"use strict";n.r(e);var o=n("6161"),a=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,(function(){return o[t]}))}(s);e["default"]=a.a},cf6c:function(t,e,n){"use strict";var o=n("eb1c"),a=n.n(o);a.a},eb1c:function(t,e,n){}},[["9317","common/runtime","common/vendor"]]]);