(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/me"],{"01ec":function(e,t,n){"use strict";var o,a=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}))},"3ae8":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=getApp(),o={data:function(){return{userInfo:{},userInfoButtonShow:!0,agentType:"",meList:[{title:"已购课程",iconImg:"../static/meBuy.png",url:"mePurchased"},{title:"资料订单",iconImg:"../static/meData.png",url:"dataOrder"},{title:"图书订单",iconImg:"../static/meData.png",url:"dataOrder"},{title:"课程订单",iconImg:"../static/meOrder.png",url:"courseOrder"},{title:"我的喜欢",iconImg:"../static/meLike.png",url:"meLike"},{title:"绑定手机号",iconImg:"../static/meTel.png",tel:"",url:"bindTel"},{title:"加入代理",iconImg:"../static/meFollow.png",url:"joinAgent"}]}},onLoad:function(){this.onGetUserInfo()},onShow:function(){this.getInfo()},methods:{onGetUserInfo:function(){var t=this;e.getSetting({success:function(o){o.authSetting["scope.userInfo"]?(t.userInfoButtonShow=!1,console.log(o,"-----------"),e.getUserInfo({success:function(e){t.userInfo=Object.assign(t.userInfo,e.userInfo),n.globalData.userInfo=t.userInfo,t.setUserInfo()}})):t.setUserInfo()}})},setUserInfo:function(){var t=this,o=this;e.login({success:function(a){e.request({url:"".concat(t.$helper.requestUrl,"auth/login"),method:"POST",data:{code:a.code,nickname:o.userInfo.nickName,sex:o.userInfo.gender,headimgurl:o.userInfo.avatarUrl,mobile:""},success:function(o){if(a=t.$helper.null2str(a),e.hideToast(),200===o.statusCode){var s=o.data.token_type+" "+o.data.access_token;n.globalData.token=s}else e.showModal({title:"",content:o.data.errmsg})}})}})},getInfo:function(){var t=this;e.request({url:"".concat(this.$helper.requestUrl,"auth/me"),method:"POST",header:{authorization:n.globalData.token},success:function(o){e.hideLoading(),o=t.$helper.null2str(o.data),"ok"==o.status_code&&(t.userInfo=o.data,n.globalData.userInfo=o.data,"0"!=o.data.extension?t.meList[6]={title:"我的代理",url:"agentList",iconImg:"../static/meFollow.png"}:t.meList[6]={title:"加入代理",url:"joinAgent",iconImg:"../static/meFollow.png"},""!=o.data.mobile&&(t.meList[5]={title:"更换手机号",url:"changeTel",iconImg:"../static/meTel.png"}),t.meList[5].tel=o.data.mobile,1==o.data.extension?t.agentType="一":2==o.data.extension?t.agentType="二":3==o.data.extension&&(t.agentType="三"))}})},meConvert:function(t){e.navigateTo({url:"/pages/meConvert?type=".concat(t)})},go:function(t,n){console.log(t),"joinAgent"==t?this.getAngent(t):"三"==this.agentType&&"我的代理"==n?e.showToast({title:"暂无此权限",icon:"none"}):e.navigateTo({url:"/pages/".concat(t,"?type=").concat(n)})},getAngent:function(t){var o=this;e.request({url:"".concat(this.$helper.requestUrl,"agent/applyState"),method:"POST",header:{authorization:n.globalData.token},success:function(n){e.hideLoading(),n=o.$helper.null2str(n.data),console.log(n,"++++++++"),"未申请"==n.message?e.navigateTo({url:"/pages/".concat(t)}):e.showToast({title:n.message,icon:"none"})}})},goMessage:function(){e.navigateTo({url:"message"})},meIntegral:function(){e.navigateTo({url:"/pages/meIntegral"})}}};t.default=o}).call(this,n("543d")["default"])},"804c":function(e,t,n){"use strict";(function(e){n("95ab"),n("921b");o(n("66fd"));var t=o(n("86d8"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"86d8":function(e,t,n){"use strict";n.r(t);var o=n("01ec"),a=n("eb7f");for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);n("cf72");var i,r=n("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],i);t["default"]=u.exports},b792:function(e,t,n){},cf72:function(e,t,n){"use strict";var o=n("b792"),a=n.n(o);a.a},eb7f:function(e,t,n){"use strict";n.r(t);var o=n("3ae8"),a=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=a.a}},[["804c","common/runtime","common/vendor"]]]);